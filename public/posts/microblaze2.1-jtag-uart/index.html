<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Microblaze2.1 JTAG-UART | QY's Notes</title><meta name=keywords content="microblaze"><meta name=description content="Using Vivado 2018.3 .
Block Diagram Changes to Microblaze1 Hello World LED | QY&rsquo;s Notes:
An AXI Interrrupt Controller Another AXI_GPIO IP, gpio_key enable GPIO interrupt the interrupt output is connected to AXI Interrrupt Controller MDM module, enable JTAG UART Microblaze Enable interrupt controller Increase Local Memory to 128 KB Key GPIO Enable interrupt
SDK BSP Settings Settings to direct print()/xil_printf() output to JTAG UART (nomarlly, these are the default, since only one UART is present here)."><meta name=author content="QY"><link rel=canonical href=qygong17.github.io/posts/microblaze2.1-jtag-uart/><meta name=google-site-verification content="qygong17"><meta name=yandex-verification content="qygong17"><meta name=msvalidate.01 content="qygong17"><link crossorigin=anonymous href=/qygong17.github.io/assets/css/stylesheet.ba817106d83429143a08d1f1482d38a14bdb99731b9720b4e65c946b0d654e02.css integrity="sha256-uoFxBtg0KRQ6CNHxSC04oUvbmXMblyC05lyUaw1lTgI=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/qygong17.github.io/assets/js/highlight.acb54fd32bbc1982428b8850317e45d076b95012730a5936667e6bc21777692a.js integrity="sha256-rLVP0yu8GYJCi4hQMX5F0Ha5UBJzClk2Zn5rwhd3aSo=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=/assets/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/assets/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=/assets/favicon-32x32.png><link rel=apple-touch-icon href=/assets/apple-touch-icon.png><link rel=mask-icon href=qygong17.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css integrity=sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ crossorigin=anonymous referrerpolicy=no-referrer><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js integrity=sha384-VQ8d8WVFw0yHhCk5E8I86oOhv48xLpnDZx5T9GogA/Y84DcCKWXDmSDfn13bzFZY crossorigin=anonymous referrerpolicy=no-referrer type=text/javascript></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous referrerpolicy=no-referrer type=text/javascript></script>
<script type=text/javascript>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"\\[",right:"\\]",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1}]})})</script><meta property="og:title" content="Microblaze2.1 JTAG-UART"><meta property="og:description" content="Using Vivado 2018.3 .
Block Diagram Changes to Microblaze1 Hello World LED | QY&rsquo;s Notes:
An AXI Interrrupt Controller Another AXI_GPIO IP, gpio_key enable GPIO interrupt the interrupt output is connected to AXI Interrrupt Controller MDM module, enable JTAG UART Microblaze Enable interrupt controller Increase Local Memory to 128 KB Key GPIO Enable interrupt
SDK BSP Settings Settings to direct print()/xil_printf() output to JTAG UART (nomarlly, these are the default, since only one UART is present here)."><meta property="og:type" content="article"><meta property="og:url" content="qygong17.github.io/posts/microblaze2.1-jtag-uart/"><meta property="og:image" content="qygong17.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-05-25T00:00:00+00:00"><meta property="article:modified_time" content="2023-05-25T00:00:00+00:00"><meta property="og:site_name" content="QY's Notes"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="qygong17.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Microblaze2.1 JTAG-UART"><meta name=twitter:description content="Using Vivado 2018.3 .
Block Diagram Changes to Microblaze1 Hello World LED | QY&rsquo;s Notes:
An AXI Interrrupt Controller Another AXI_GPIO IP, gpio_key enable GPIO interrupt the interrupt output is connected to AXI Interrrupt Controller MDM module, enable JTAG UART Microblaze Enable interrupt controller Increase Local Memory to 128 KB Key GPIO Enable interrupt
SDK BSP Settings Settings to direct print()/xil_printf() output to JTAG UART (nomarlly, these are the default, since only one UART is present here)."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"qygong17.github.io/posts/"},{"@type":"ListItem","position":3,"name":"Microblaze2.1 JTAG-UART","item":"qygong17.github.io/posts/microblaze2.1-jtag-uart/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Microblaze2.1 JTAG-UART","name":"Microblaze2.1 JTAG-UART","description":"Using Vivado 2018.3 .\nBlock Diagram Changes to Microblaze1 Hello World LED | QY\u0026rsquo;s Notes:\nAn AXI Interrrupt Controller Another AXI_GPIO IP, gpio_key enable GPIO interrupt the interrupt output is connected to AXI Interrrupt Controller MDM module, enable JTAG UART Microblaze Enable interrupt controller Increase Local Memory to 128 KB Key GPIO Enable interrupt\nSDK BSP Settings Settings to direct print()/xil_printf() output to JTAG UART (nomarlly, these are the default, since only one UART is present here).","keywords":["microblaze"],"articleBody":"Using Vivado 2018.3 .\nBlock Diagram Changes to Microblaze1 Hello World LED | QY’s Notes:\nAn AXI Interrrupt Controller Another AXI_GPIO IP, gpio_key enable GPIO interrupt the interrupt output is connected to AXI Interrrupt Controller MDM module, enable JTAG UART Microblaze Enable interrupt controller Increase Local Memory to 128 KB Key GPIO Enable interrupt\nSDK BSP Settings Settings to direct print()/xil_printf() output to JTAG UART (nomarlly, these are the default, since only one UART is present here).\nSample Code Just a helloworld…\n1 2 3 4 5 6 7 8 9 10 11 12 13 #include #include \"platform.h\" #include \"xil_printf.h\" int main() { init_platform(); print(\"Hello World\\n\\r\"); cleanup_platform(); return 0; } Debug The output is printed in the Console.\nJTAG UART could be useful for debugging. However, sending stuff to it seems compicated. For example, in this link: MicroBlaze bare metal JTAG UART how do I receive/input/stdin? (xilinx.com)\nI am trying to number these posts based on the hardware platform, i.e., the block diagram in Vivado. So the y-th application from the x-th block diagram would be x.y.\nMy end goal here is just to control an iic device with MicroBlaze, but I will firstly work on modules such as interrupt, timer and uart, because I find the AXI_IIC IP and the APIs a bit confusing and seem to require some other IPs such as the interrupt.\nug940-vivado-tutorial-embedded-design.pdf\nMicroBlaze Processor Quick Start Guide (xilinx.com)\n","wordCount":"234","inLanguage":"en","datePublished":"2023-05-25T00:00:00Z","dateModified":"2023-05-25T00:00:00Z","author":{"@type":"Person","name":"QY"},"mainEntityOfPage":{"@type":"WebPage","@id":"qygong17.github.io/posts/microblaze2.1-jtag-uart/"},"publisher":{"@type":"Organization","name":"QY's Notes","logo":{"@type":"ImageObject","url":"/assets/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=qygong17.github.io accesskey=h title="QY's Notes (Alt + H)">QY's Notes</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=qygong17.github.io/qygong17.github.io/about/ title=About><span>About</span></a></li><li><a href=qygong17.github.io/qygong17.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=qygong17.github.io/qygong17.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=qygong17.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=qygong17.github.io>Home</a>&nbsp;»&nbsp;<a href=qygong17.github.io/posts/>Posts</a></div><h1 class=post-title>Microblaze2.1 JTAG-UART</h1><div class=post-meta><span title='2023-05-25 00:00:00 +0000 UTC'>May 25, 2023</span>&nbsp;·&nbsp;QY&nbsp;·&nbsp;<a href=/tags/microblaze> microblaze</a>&nbsp;|&nbsp;<a href=https://github.com/qyGong17/qyGong17.github.io/tree/main/content/posts/Microblaze2.1%20JTAG-UART.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#block-diagram aria-label="Block Diagram">Block Diagram</a><ul><li><a href=#microblaze aria-label=Microblaze>Microblaze</a></li><li><a href=#key-gpio aria-label="Key GPIO">Key GPIO</a></li></ul></li><li><a href=#sdk aria-label=SDK>SDK</a><ul><li><a href=#bsp-settings aria-label="BSP Settings">BSP Settings</a></li><li><a href=#sample-code aria-label="Sample Code">Sample Code</a></li><li><a href=#debug aria-label=Debug>Debug</a></li></ul></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><p>Using <code>Vivado 2018.3</code> .</p><h1 id=block-diagram>Block Diagram<a hidden class=anchor aria-hidden=true href=#block-diagram>#</a></h1><p>Changes to <a href=https://qygong17.github.io/posts/microblaze1-hello-world-led/>Microblaze1 Hello World LED | QY&rsquo;s Notes</a>:</p><ul><li>An AXI Interrrupt Controller</li><li>Another AXI_GPIO IP, <code>gpio_key</code><ul><li>enable GPIO interrupt</li><li>the interrupt output is connected to AXI Interrrupt Controller</li></ul></li><li>MDM module, enable <code>JTAG UART</code></li></ul><p><img loading=lazy src=/images/img_2023-05-25-2.png alt></p><h2 id=microblaze>Microblaze<a hidden class=anchor aria-hidden=true href=#microblaze>#</a></h2><ul><li>Enable <code>interrupt controller</code></li><li>Increase Local Memory to <code>128 KB</code></li></ul><p><img loading=lazy src=/images/img_2023-05-25.png alt></p><h2 id=key-gpio>Key GPIO<a hidden class=anchor aria-hidden=true href=#key-gpio>#</a></h2><p>Enable interrupt</p><p><img loading=lazy src=/images/img_2023-05-25-3.png alt></p><h1 id=sdk>SDK<a hidden class=anchor aria-hidden=true href=#sdk>#</a></h1><h2 id=bsp-settings>BSP Settings<a hidden class=anchor aria-hidden=true href=#bsp-settings>#</a></h2><p>Settings to direct <code>print()/xil_printf()</code> output to <code>JTAG UART</code> (nomarlly, these are the default, since only one UART is present here).</p><p><img loading=lazy src=/images/img_2023-05-25-6.png alt></p><p><img loading=lazy src=/images/img_2023-05-25-4.png alt></p><p><img loading=lazy src=/images/img_2023-05-25-5.png alt></p><h2 id=sample-code>Sample Code<a hidden class=anchor aria-hidden=true href=#sample-code>#</a></h2><p>Just a helloworld&mldr;</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-C data-lang=C><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&#34;platform.h&#34;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&#34;xil_printf.h&#34;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nf>init_platform</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nf>print</span><span class=p>(</span><span class=s>&#34;Hello World</span><span class=se>\n\r</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nf>cleanup_platform</span><span class=p>();</span>    
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=debug>Debug<a hidden class=anchor aria-hidden=true href=#debug>#</a></h2><p>The output is printed in the <code>Console</code>.</p><p><img loading=lazy src=/images/img_2023-05-25-1.png alt></p><p><code>JTAG UART</code> could be useful for debugging. However, sending stuff to it seems compicated.
For example, in this link: <a href="https://support.xilinx.com/s/question/0D52E00006hpenSSAQ/microblaze-bare-metal-jtag-uart-how-do-i-receiveinputstdin?language=en_US">MicroBlaze bare metal JTAG UART how do I receive/input/stdin? (xilinx.com)</a></p><p>I am trying to number these posts based on the hardware platform, i.e., the block diagram in Vivado. So the <code>y-th</code> application from the <code>x-th</code> block diagram would be <code>x.y</code>.</p><p>My end goal here is just to control an iic device with MicroBlaze, but I will firstly work on modules such as interrupt, timer and uart, because I find the AXI_IIC IP and the APIs a bit confusing and seem to require some other IPs such as the interrupt.</p><p><a href=https://docs.xilinx.com/v/u/2017.2-English/ug940-vivado-tutorial-embedded-design>ug940-vivado-tutorial-embedded-design.pdf</a></p><p><a href=https://www.xilinx.com/support/documents/quick_start/microblaze-quick-start-guide.pdf>MicroBlaze Processor Quick Start Guide (xilinx.com)</a></p></div><footer class=post-footer><ul class=post-tags><li><a href=qygong17.github.io/tags/microblaze/>microblaze</a></li></ul><nav class=paginav><a class=prev href=qygong17.github.io/posts/microblaze2.2-gpio-interrupt/><span class=title>« Prev</span><br><span>Microblaze2.2 GPIO Interrupt</span></a>
<a class=next href=qygong17.github.io/posts/siwave/siwave0-allegro-16.6-export-odb++/><span class=title>Next »</span><br><span>SIwave0 Allegro 16.6 Export ODB++</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=qygong17.github.io>QY's Notes</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>