<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>SIwave2 S-parameter Extraction | QY's Notes</title>
<meta name=keywords content="SIwave"><meta name=description content="This post introduces how to extract the s-parameter of a pair of PCB traces using SIwave 2020R2."><meta name=author content="QY"><link rel=canonical href=qygong17.github.io/posts/siwave/siwave2-s-parameter-extraction/><meta name=google-site-verification content="qygong17"><meta name=yandex-verification content="qygong17"><meta name=msvalidate.01 content="qygong17"><link crossorigin=anonymous href=qygong17.github.io/assets/css/stylesheet.ba817106d83429143a08d1f1482d38a14bdb99731b9720b4e65c946b0d654e02.css integrity="sha256-uoFxBtg0KRQ6CNHxSC04oUvbmXMblyC05lyUaw1lTgI=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=qygong17.github.io/assets/js/highlight.acb54fd32bbc1982428b8850317e45d076b95012730a5936667e6bc21777692a.js integrity="sha256-rLVP0yu8GYJCi4hQMX5F0Ha5UBJzClk2Zn5rwhd3aSo=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=/assets/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/assets/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=/assets/favicon-32x32.png><link rel=apple-touch-icon href=/assets/apple-touch-icon.png><link rel=mask-icon href=qygong17.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=qygong17.github.io/posts/siwave/siwave2-s-parameter-extraction/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css integrity=sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ crossorigin=anonymous referrerpolicy=no-referrer><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js integrity=sha384-VQ8d8WVFw0yHhCk5E8I86oOhv48xLpnDZx5T9GogA/Y84DcCKWXDmSDfn13bzFZY crossorigin=anonymous referrerpolicy=no-referrer type=text/javascript></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous referrerpolicy=no-referrer type=text/javascript></script><script type=text/javascript>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"\\[",right:"\\]",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1}]})})</script><meta property="og:title" content="SIwave2 S-parameter Extraction"><meta property="og:description" content="This post introduces how to extract the s-parameter of a pair of PCB traces using SIwave 2020R2."><meta property="og:type" content="article"><meta property="og:url" content="qygong17.github.io/posts/siwave/siwave2-s-parameter-extraction/"><meta property="og:image" content="qygong17.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-06-04T00:00:00+00:00"><meta property="article:modified_time" content="2023-06-04T00:00:00+00:00"><meta property="og:site_name" content="QY's Notes"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="qygong17.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="SIwave2 S-parameter Extraction"><meta name=twitter:description content="This post introduces how to extract the s-parameter of a pair of PCB traces using SIwave 2020R2."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"qygong17.github.io/posts/"},{"@type":"ListItem","position":2,"name":"SIwave","item":"qygong17.github.io/posts/siwave/"},{"@type":"ListItem","position":3,"name":"SIwave2 S-parameter Extraction","item":"qygong17.github.io/posts/siwave/siwave2-s-parameter-extraction/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"SIwave2 S-parameter Extraction","name":"SIwave2 S-parameter Extraction","description":"This post introduces how to extract the s-parameter of a pair of PCB traces using SIwave 2020R2.","keywords":["SIwave"],"articleBody":"Using Ansys SIwave 2020R2.\nThis post introduces how to extract the s-parameter of a pair of PCB traces using SIwave 2020R2.\nResource From SIwave documentation:\nAdding a Port - Simulation Setup Computing SYZ Parameters using SIwave Sample Board The schematic: Focus on the RX pair with a pair of AC-coupling capacitors. The PCB layout:\nTrace length around 4100 mils Trace width/spacing=4.2mil/6.3mil The 8-layer stackup in Allegro. Importing to SIwave SIwave0 Allegro 16.6 Export ODB++ | QY’s Notes SIwave1 New Project and DC IR analysis | QY’s Notes Stackup Dielectric material: TU-768 - Taiwan Union Technology Corporation\nUse select all on the bottom-left corner to select and edit all conductor/dielectric layers.\nFor example,\nMedal: copper, (also, dielectric fill: FR-4) Dielectric: FR-4 Assign Capacitor Model Tools-S-param Model Assignment, use filter to narrow down the model list.\nAdding Ports Tools-Generated Port: For the RX pair in the sample board, J1---cap---J2, for each trace, 2 ports are needed at J1 and J2:\nCheck the generated port and make sure that the negative net -Net is GND and is near the positive net +Net. Compute SYZ Parameters Simulation-Compute SYZ Parameters:\nSet the frequency range Export Touchstone file, this will generate an .snp file, where n is the total number of ports. In this case, an .s4p file. Display Results Select the SYZ simulation-right click-Compute Differential S-parameters: For example, insertion loss:\n+Port and -Port pair: RX_P and RX_N ports at J1 (or J2) Plot: from diff. port DIFFP0:Diff to DIFFP1:Diff Also, the .snp file could be used in other software such as ADS: like in this youtube video\nSnP File In an .s4p, at each frequency, there are 1 stimulus and 16 S-parameters, each S-parameter consists of real and imaginary parts, so 33 parameters at each frequency point.\nSuch as:\n! S-parameters\r# Hz S MA R 50.000000\r5.000000000000e+06 7.415729611535e-03 -9.049652032862e+00 2.905053518013e-03 7.206460994824e+01 9.921850136786e-01 -1.314852190849e+00 1.330022519835e-03 -1.285113705145e+02\r2.905053518013e-03 7.206460994824e+01 7.414583662428e-03 -9.086051281811e+00 1.330024196348e-03 -1.285117281406e+02 9.921868920609e-01 -1.314594245442e+00\r9.921850136786e-01 -1.314852190849e+00 1.330024196348e-03 -1.285117281406e+02 7.547298314186e-03 -8.975382166206e+00 2.901011285899e-03 7.215890285145e+01\r1.330022519835e-03 -1.285113705145e+02 9.921868920609e-01 -1.314594245442e+00 2.901011285899e-03 7.215890285145e+01 7.545921799068e-03 -9.010637065165e+00 According to SnP File Format\n*.s1p Files\rEach record contains 1 stimulus value and 1 S-parameter (total of 3 values).\rStim Real (Sxx) Imag(Sxx)\r*.s2p Files\rEach record contains 1 stimulus value and 4 S-parameters (total of 9 values)\rStim Real (S11) Imag(S11) Real(S21) Imag(S21) Real(S12) Imag(S12) Real(S22) Imag(S22)\r*.s3p Files\rEach record contains 1 stimulus value and 9 S-parameters (total of 19 values)\rStim Real (S11) Imag(S11) Real(S12) Imag(S12) Real(S13) Imag(S13)\rReal (S21) Imag(S21) Real(S22) Imag(S22) Real(S23) Imag(S23)\rReal (S31) Imag(S31) Real(S32) Imag(S32) Real(S33) Imag(S33)\r*.s4p Files\rEach record contains 1 stimulus value and 16 S-parameters (total of 33 values)\rStim Real (S11) Imag(S11) Real(S12) Imag(S12) Real(S13) Imag(S13) Real(S14) Imag(S14)\rReal (S21) Imag(S21) Real(S22) Imag(S22) Real(S23) Imag(S23) Real(S24) Imag(S24)\rReal (S31) Imag(S31) Real(S32) Imag(S32) Real(S33) Imag(S33) Real(S34) Imag(S34)\rReal (S41) Imag(S41) Real(S42) Imag(S42) Real(S43) Imag(S43) Real(S44) Imag(S44)\rThis pattern continues for N ports involved in the measurement. ","wordCount":"483","inLanguage":"en","datePublished":"2023-06-04T00:00:00Z","dateModified":"2023-06-04T00:00:00Z","author":{"@type":"Person","name":"QY"},"mainEntityOfPage":{"@type":"WebPage","@id":"qygong17.github.io/posts/siwave/siwave2-s-parameter-extraction/"},"publisher":{"@type":"Organization","name":"QY's Notes","logo":{"@type":"ImageObject","url":"/assets/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=qygong17.github.io/ accesskey=h title="QY's Notes (Alt + H)">QY's Notes</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></div></div><ul id=menu><li><a href=qygong17.github.io/qygong17.github.io/about/ title=About><span>About</span></a></li><li><a href=qygong17.github.io/qygong17.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=qygong17.github.io/qygong17.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=qygong17.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=qygong17.github.io/>Home</a>&nbsp;»&nbsp;<a href=qygong17.github.io/posts/>Posts</a>&nbsp;»&nbsp;<a href=qygong17.github.io/posts/siwave/>SIwave</a></div><h1 class=post-title>SIwave2 S-parameter Extraction</h1><div class=post-meta>&lt;span title='2023-06-04 00:00:00 +0000 UTC'>June 4, 2023&lt;/span>&amp;nbsp;·&amp;nbsp;QY&amp;nbsp;·&amp;nbsp;&lt;a href="/tags/siwave"> SIwave&lt;/a>&nbsp;|&nbsp;<a href=https://github.com/qyGong17/qyGong17.github.io/tree/main/content/posts/SIwave/SIwave2%20S-parameter%20Extraction.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#resource aria-label=Resource>Resource</a></li><li><a href=#sample-board aria-label="Sample Board">Sample Board</a></li><li><a href=#importing-to-siwave aria-label="Importing to SIwave">Importing to SIwave</a></li><li><a href=#stackup aria-label=Stackup>Stackup</a></li><li><a href=#assign-capacitor-model aria-label="Assign Capacitor Model">Assign Capacitor Model</a></li><li><a href=#adding-ports aria-label="Adding Ports">Adding Ports</a></li><li><a href=#compute-syz-parameters aria-label="Compute SYZ Parameters">Compute SYZ Parameters</a></li><li><a href=#display-results aria-label="Display Results">Display Results</a></li><li><a href=#snp-file aria-label="SnP File">SnP File</a></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><p>Using <code>Ansys SIwave 2020R2</code>.</p><p>This post introduces how to extract the s-parameter of a pair of PCB traces using SIwave 2020R2.</p><h1 id=resource>Resource<a hidden class=anchor aria-hidden=true href=#resource>#</a></h1><p>From SIwave documentation:</p><ul><li><a href="https://ansyshelp.ansys.com/account/secured?returnurl=/Views/Secured/Electronics/v202/en/home.htm%23../Subsystems/SIwave/Content/AddingaPort.htm">Adding a Port - Simulation Setup</a></li><li><a href="https://ansyshelp.ansys.com/account/secured?returnurl=/Views/Secured/Electronics/v202/en/home.htm%23../Subsystems/SIwave/Content/ComputingSYZParametersinSIwave.htm">Computing SYZ Parameters using SIwave</a></li></ul><h1 id=sample-board>Sample Board<a hidden class=anchor aria-hidden=true href=#sample-board>#</a></h1><p>The schematic:
Focus on the <code>RX</code> pair with a pair of AC-coupling capacitors.
<img loading=lazy src=/images/img_2023-05-29.png alt></p><p>The PCB layout:</p><ul><li>Trace length around 4100 mils</li><li>Trace width/spacing=4.2mil/6.3mil
<img loading=lazy src=/images/img_2023-05-29-1.png alt></li></ul><p>The 8-layer stackup in Allegro.
<img loading=lazy src=/images/img_2023-05-29-2.png alt></p><h1 id=importing-to-siwave>Importing to SIwave<a hidden class=anchor aria-hidden=true href=#importing-to-siwave>#</a></h1><ul><li><a href=https://qygong17.github.io/posts/siwave/siwave0-allegro-16.6-export-odb++/>SIwave0 Allegro 16.6 Export ODB++ | QY&rsquo;s Notes</a></li><li><a href=https://qygong17.github.io/posts/siwave/siwave1-new-project-and-dc-ir-analysis/>SIwave1 New Project and DC IR analysis | QY&rsquo;s Notes</a></li></ul><h1 id=stackup>Stackup<a hidden class=anchor aria-hidden=true href=#stackup>#</a></h1><p>Dielectric material: <a href=https://www.tuc.com.tw/en-us/products-detail/id/24>TU-768 - Taiwan Union Technology Corporation</a></p><blockquote><p>Use <code>select all</code> on the bottom-left corner to select and edit all conductor/dielectric layers.</p></blockquote><p>For example,</p><ul><li>Medal: <code>copper</code>, (also, dielectric fill: <code>FR-4</code>)</li><li>Dielectric: <code>FR-4</code>
<img loading=lazy src=/images/img_2023-05-29-3.png alt></li></ul><h1 id=assign-capacitor-model>Assign Capacitor Model<a hidden class=anchor aria-hidden=true href=#assign-capacitor-model>#</a></h1><p>Tools-S-param Model Assignment, use <code>filter</code> to narrow down the model list.</p><p><img loading=lazy src=/images/img_2023-05-29-5.png alt></p><h1 id=adding-ports>Adding Ports<a hidden class=anchor aria-hidden=true href=#adding-ports>#</a></h1><p>Tools-Generated Port:
<img loading=lazy src=/images/img_2023-05-29-4.png alt></p><p>For the RX pair in the sample board, <code>J1---cap---J2</code>, for each trace, 2 ports are needed at <code>J1</code> and <code>J2</code>:</p><p><img loading=lazy src=/images/img_2023-05-29-6.png alt></p><p>Check the generated port and make sure that the negative net <code>-Net</code> is GND and is near the positive net <code>+Net</code>.
<img loading=lazy src=/images/img_2023-05-29-7.png alt></p><h1 id=compute-syz-parameters>Compute SYZ Parameters<a hidden class=anchor aria-hidden=true href=#compute-syz-parameters>#</a></h1><p>Simulation-Compute SYZ Parameters:</p><ul><li>Set the frequency range</li><li><code>Export Touchstone file</code>, this will generate an <code>.snp</code> file, where <code>n</code> is the total number of ports. In this case, an <code>.s4p</code> file.
<img loading=lazy src=/images/img_2023-05-29-8.png alt></li></ul><h1 id=display-results>Display Results<a hidden class=anchor aria-hidden=true href=#display-results>#</a></h1><p>Select the SYZ simulation-right click-Compute Differential S-parameters:
<img loading=lazy src=/images/img_2023-05-29-9.png alt></p><p>For example, insertion loss:</p><ul><li><code>+Port</code> and <code>-Port</code> pair: <code>RX_P</code> and <code>RX_N</code> ports at J1 (or J2)</li><li>Plot: from diff. port <code>DIFFP0:Diff</code> to <code>DIFFP1:Diff</code>
<img loading=lazy src=/images/img_2023-05-29-10.png alt></li></ul><p>Also, the <code>.snp</code> file could be used in other software such as ADS: <a href="https://www.youtube.com/watch?v=f45I5R8iNwQ">like in this youtube video</a></p><h1 id=snp-file>SnP File<a hidden class=anchor aria-hidden=true href=#snp-file>#</a></h1><p>In an <code>.s4p</code>, at each frequency, there are <code>1 stimulus and 16 S-parameters</code>, each S-parameter consists of real and imaginary parts, so 33 parameters at each frequency point.</p><p>Such as:</p><pre tabindex=0><code>! S-parameters
# Hz S MA R 50.000000
5.000000000000e+06 7.415729611535e-03 -9.049652032862e+00 2.905053518013e-03 7.206460994824e+01 9.921850136786e-01 -1.314852190849e+00 1.330022519835e-03 -1.285113705145e+02
                   2.905053518013e-03 7.206460994824e+01 7.414583662428e-03 -9.086051281811e+00 1.330024196348e-03 -1.285117281406e+02 9.921868920609e-01 -1.314594245442e+00
                   9.921850136786e-01 -1.314852190849e+00 1.330024196348e-03 -1.285117281406e+02 7.547298314186e-03 -8.975382166206e+00 2.901011285899e-03 7.215890285145e+01
                   1.330022519835e-03 -1.285113705145e+02 9.921868920609e-01 -1.314594245442e+00 2.901011285899e-03 7.215890285145e+01 7.545921799068e-03 -9.010637065165e+00
</code></pre><p>According to <a href="https://rfmw.em.keysight.com/wireless/helpfiles/N1930B/FilePrint/SnP_File_Format.htm#:~:text=SnP%20files%20contain%20header%20information,(records)%20in%20each%20file.">SnP File Format</a></p><pre tabindex=0><code>*.s1p Files
Each record contains 1 stimulus value and 1 S-parameter (total of 3 values).

Stim  Real (Sxx)  Imag(Sxx)

*.s2p Files
Each record contains 1 stimulus value and 4 S-parameters (total of 9 values)

Stim  Real (S11)  Imag(S11)  Real(S21)  Imag(S21)  Real(S12)  Imag(S12)  Real(S22)  Imag(S22)

*.s3p Files
Each record contains 1 stimulus value and 9 S-parameters (total of 19 values)

Stim   Real (S11)  Imag(S11)  Real(S12)  Imag(S12)  Real(S13)  Imag(S13)

          Real (S21)  Imag(S21)  Real(S22)  Imag(S22)  Real(S23)  Imag(S23)

          Real (S31)  Imag(S31)  Real(S32)  Imag(S32)  Real(S33)  Imag(S33)

*.s4p Files
Each record contains 1 stimulus value and 16 S-parameters (total of 33 values)

Stim   Real (S11)  Imag(S11)  Real(S12)  Imag(S12)  Real(S13)  Imag(S13)  Real(S14)  Imag(S14)

          Real (S21)  Imag(S21)  Real(S22)  Imag(S22)  Real(S23)  Imag(S23)  Real(S24)  Imag(S24)

          Real (S31)  Imag(S31)  Real(S32)  Imag(S32)  Real(S33)  Imag(S33)  Real(S34)  Imag(S34)

          Real (S41)  Imag(S41)  Real(S42)  Imag(S42)  Real(S43)  Imag(S43)  Real(S44)  Imag(S44)

This pattern continues for N ports involved in the measurement.
</code></pre></div><footer class=post-footer><ul class=post-tags><li><a href=qygong17.github.io/tags/siwave/>SIwave</a></li></ul><nav class=paginav><a class=prev href=qygong17.github.io/posts/thermal/><span class=title>« Prev</span><br><span>Thermal resistance and thermal characterisation parameter</span>
</a><a class=next href=qygong17.github.io/posts/%E8%8D%89%E5%8E%9F-%E5%A5%91%E8%AF%83%E5%A4%AB/><span class=title>Next »</span><br><span>草原 契诃夫</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=qygong17.github.io/>QY's Notes</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>